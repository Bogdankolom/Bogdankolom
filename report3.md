                     Лабораторна  робота №3     

Автор: Коломійченко Богдан Сергійович
Група:ІПЗ-13
Варіант:7
                                                      Завдання
Обчислити суму ряду, елементи якого розраховуються з використанням операцій піднесення у степінь, розрахунку факторіалу числа, операцій множення та ділення. 
Для розрахунку першої суми з параметром від 1 до 5 використати цикл for. Для розрахунку внутрішньої суми з параметром від 0 до нескінченності використати цикл while.
Для визначення нескінченності потрібно задати точність розрахунку поточного элементу ряду. Підсумовування припиняється, якщо досягнута задана користувачем точність розрахунку. Перевірити знаменник на рівність нулю для запобігання ділення на нуль.
Результат подати у вигляді таблиці із чотирма колонками, що визначають параметри зовнішньої та внутрішньої сум, значення члена ряду та накопичувану суму 

import math

k = 0
res = 0
sum_res = 0
row_print = []
remember = 0


def print_intro():  # сервісна функція для заголовку. частина 1.
    intro_line = ["=" * 60]
    for counter1 in range(len(intro_line)):
        print(intro_line[counter1])


def set_headers():  # сервісна функція для заголовку. частина 2.
    headers = [" ", " ", "X", " ", " ", " ", "K", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "R", "E",
               "S", "U", "L", "T", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
               " ", " ", " ", " ", "S", "U", "M", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "]
    # Python Enhancement Proposal 8, стиль коду заданий розробниками мови - строка < 120 символів для зручності читання
    for counter2 in range(len(headers) - 1):
        print(headers[counter2], end="")
    print(headers[59])


print("ІПЗ-13, Коломійченко Богдан Сергійович")
print("Лабораторна робота 3")
print("Варіант 7", end="\n\n")
print("Обчислення результату згідно формули")
print("SUM+X [SUM+K [(-1)^k * x^2k / k^x * (k + 1) * (k + 2)]]")  # інформаційна частина, вивід авторства

print("Будь ласка, оберіть спосіб задання точності")
print("1: abs(res) - abs(remember) < accuracy")
print("2: 1e-100 < abs(res) < 1e+100")
# захист від некорректного введеня способу точності
while True:
    try:
        accuracy_mode = int(input("Вибір?: "))
    except ValueError:
        print("Некорректна відповідь")
        continue
    if accuracy_mode == 1 or accuracy_mode == 2:
        break
    print("Невірний режим задання точності!")

while True:
    try:
        accuracy = float(input("Будь ласка, задайте точність розрахунку: "))  # задання точності обчислення
        break
    except ValueError:
        print("Некорректна відповідь")

print_intro()
set_headers()
print_intro()  # виклик заголовку


for x in range(1, 6):
    k = 0
    while True:
        res1 = math.pow(-1, k) * math.pow(x, 2 * k)
        res2 = math.pow(k, x) * (k + 1) * (k + 2)  # розбите на три частини вирахування формули
        try:
            res = res1 / res2
        except ZeroDivisionError:
            print("Ділення на 0, пропуск")  # захист від ділення на 0
            k += 1
            continue
        sum_res += res
        print("  ", end="")  # вирівнювання результатів під заголовок - початок
        print(x, end='   ')
        if len(str(k)) == 2:
            print(k, end='   ')
        else:
            print(k, end='    ')
        print(res, end='')
        calculate_format = 25 - len(str(res))
        for i in range(calculate_format):
            print(" ", end='')
        print(sum_res)  # вирівнювання результатів під заголовок - кінець, виведення результату
        if accuracy_mode == 1:  # вибір способу обчислення точності згідно заданого користувачем
            if abs(res) - abs(remember) < accuracy:
                break
        elif accuracy_mode == 2:
            if 1e-100 < abs(res) < 1e+100:
                break
        remember = res
        k += 1  # рахівна змінна внутрішнього циклу
    x += 1  # рахівна змінна зовнішнього циклу
